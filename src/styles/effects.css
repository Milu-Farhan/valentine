/* ─── Twinkling stars ─── */
.starry-night {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.star {
  position: absolute;
  background: #fff;
  border-radius: 50%;
  animation: twinkleStar ease-in-out infinite;
  box-shadow: 0 0 4px 1px rgba(255, 255, 255, 0.3);
}

@keyframes twinkleStar {
  0%,
  100% {
    opacity: 0.2;
    transform: scale(0.8);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
}

/* ─── Shooting stars ─── */
.shooting-star {
  position: absolute;
  width: var(--star-size, 3px);
  height: var(--star-size, 3px);
  background: #fff;
  border-radius: 50%;
  opacity: 0;
  transform: rotate(35deg);
  animation: shootingStar linear infinite;
  box-shadow:
    0 0 6px 2px rgba(255, 255, 255, 0.8),
    0 0 14px 4px rgba(200, 180, 255, 0.4);
}

.shooting-star::before {
  content: "";
  position: absolute;
  top: 50%;
  right: calc(100% - 1px);
  width: var(--tail-length, 120px);
  height: 2px;
  transform: translateY(-50%);
  background: linear-gradient(
    to left,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(200, 180, 255, 0.6) 15%,
    rgba(255, 180, 200, 0.3) 40%,
    transparent 100%
  );
  border-radius: 1px;
}

.shooting-star::after {
  content: "";
  position: absolute;
  top: 50%;
  right: calc(100% - 1px);
  width: calc(var(--tail-length, 120px) * 0.7);
  height: 8px;
  transform: translateY(-50%);
  background: linear-gradient(
    to left,
    rgba(200, 180, 255, 0.3) 0%,
    rgba(255, 150, 200, 0.1) 40%,
    transparent 100%
  );
  border-radius: 4px;
  filter: blur(3px);
}

@keyframes shootingStar {
  0% {
    opacity: 0;
    transform: rotate(35deg) translateX(0);
  }
  1% {
    opacity: 1;
  }
  8% {
    opacity: 0.6;
  }
  15% {
    opacity: 0;
    transform: rotate(35deg) translateX(50vw);
  }
  100% {
    opacity: 0;
    transform: rotate(35deg) translateX(50vw);
  }
}

/* ─── Sparkle cursor trail ─── */
.sparkle-trail {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
}

.sparkle-particle {
  position: fixed;
  font-size: 16px;
  pointer-events: none;
  animation: sparkleFade 0.8s ease-out forwards;
  transform: translate(-50%, -50%);
}

@keyframes sparkleFade {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, calc(-50% - 30px)) scale(0.3) rotate(180deg);
  }
}

/* ─── Fireworks ─── */
.fireworks-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9998;
}

.firework {
  position: absolute;
  bottom: 0;
}

.firework-trail {
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 3.5px;
  height: 0;
  transform: translateX(-50%);
  background: linear-gradient(
    to top,
    transparent 0%,
    rgba(255, 200, 180, 0.6) 40%,
    rgba(255, 255, 255, 0.95) 100%
  );
  border-radius: 2px;
  opacity: 0;
  animation: trailShoot 0.7s ease-out forwards;
  box-shadow: 0 0 12px 3px rgba(255, 180, 160, 0.5);
}

@keyframes trailShoot {
  0% {
    height: 0;
    bottom: 0;
    opacity: 1;
  }
  50% {
    height: 100px;
    opacity: 1;
  }
  100% {
    height: 50px;
    bottom: calc(100vh - var(--burst-y));
    opacity: 0;
  }
}

.firework-burst {
  position: absolute;
  bottom: calc(100vh - var(--burst-y));
  left: 0;
  opacity: 0;
  animation: burstFlash 0.15s ease-out forwards;
}

@keyframes burstFlash {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

.spark {
  position: absolute;
  width: var(--spark-size);
  height: var(--spark-size);
  left: 0;
  top: 0;
  background: var(--spark-color);
  border-radius: 50%;
  opacity: 0;
  box-shadow:
    0 0 8px 3px var(--spark-color),
    0 0 18px 6px rgba(255, 255, 255, 0.25);
  animation: sparkBurst ease-out forwards;
  transform-origin: center center;
}

.spark::after {
  content: "";
  position: absolute;
  width: var(--trail-len);
  height: 2.5px;
  right: 100%;
  top: 50%;
  transform: translateY(-50%);
  background: linear-gradient(to left, var(--spark-color), transparent);
  border-radius: 1px;
  opacity: 0.7;
}

@keyframes sparkBurst {
  0% {
    opacity: 1;
    transform: rotate(var(--spark-angle)) translateX(0) scale(1.2);
  }
  20% {
    opacity: 1;
    transform: rotate(var(--spark-angle))
      translateX(calc(var(--spark-dist) * 0.6)) scale(1);
  }
  60% {
    opacity: 0.7;
    transform: rotate(var(--spark-angle)) translateX(var(--spark-dist))
      scale(0.7);
  }
  100% {
    opacity: 0;
    transform: rotate(var(--spark-angle)) translateX(var(--spark-dist))
      translateY(60px) scale(0.1);
  }
}

/* ─── Falling rose petals ─── */
.rose-petals {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.petal {
  position: absolute;
  top: -30px;
  opacity: 0;
  animation: petalFall linear infinite;
}

@keyframes petalFall {
  0% {
    transform: translateY(0) translateX(0) rotate(0deg);
    opacity: 0;
  }
  5% {
    opacity: 0.6;
  }
  25% {
    transform: translateY(25vh) translateX(var(--sway)) rotate(90deg);
  }
  50% {
    transform: translateY(50vh) translateX(calc(var(--sway) * -0.5))
      rotate(180deg);
    opacity: 0.4;
  }
  75% {
    transform: translateY(75vh) translateX(var(--sway)) rotate(270deg);
  }
  100% {
    transform: translateY(110vh) translateX(0) rotate(360deg);
    opacity: 0;
  }
}

/* ─── Floating hearts ─── */
.floating-hearts {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.floating-heart {
  position: absolute;
  bottom: -40px;
  opacity: 0;
  animation: floatUp linear infinite;
}

.floating-heart.swayLeft {
  animation:
    floatUp linear infinite,
    swayL 3s ease-in-out infinite;
}

.floating-heart.swayRight {
  animation:
    floatUp linear infinite,
    swayR 3s ease-in-out infinite;
}

@keyframes floatUp {
  0% {
    transform: translateY(0) rotate(0deg) scale(1);
    opacity: 0;
  }
  8% {
    opacity: 0.7;
  }
  50% {
    opacity: 0.5;
  }
  85% {
    opacity: 0.2;
  }
  100% {
    transform: translateY(-115vh) rotate(360deg) scale(0.4);
    opacity: 0;
  }
}

@keyframes swayL {
  0%,
  100% {
    margin-left: 0;
  }
  50% {
    margin-left: -30px;
  }
}

@keyframes swayR {
  0%,
  100% {
    margin-left: 0;
  }
  50% {
    margin-left: 30px;
  }
}

/* ─── Floating whisper texts ─── */
.whisper-texts {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.whisper {
  position: absolute;
  font-family: "Dancing Script", cursive;
  color: rgba(255, 180, 200, 0.08);
  white-space: nowrap;
  animation: whisperDrift linear infinite;
  letter-spacing: 2px;
}

@keyframes whisperDrift {
  0% {
    opacity: 0;
    transform: translateX(-30px) rotate(-2deg);
  }
  15% {
    opacity: 1;
  }
  85% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateX(30px) rotate(2deg);
  }
}

/* ─── Responsive — effects ─── */
@media (max-width: 520px) {
  .shooting-star::before {
    width: calc(var(--tail-length, 120px) * 0.6);
  }
  .shooting-star::after {
    width: calc(var(--tail-length, 120px) * 0.4);
  }
}
